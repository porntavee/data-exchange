<p-toast></p-toast>

<div class="col-12 card card-stats p-6" [ngClass]="{ 'theme-arya': themeService.theme === 'arya-orange',
    'theme-saga': themeService.theme === 'saga-orange'}">
    <div style="font-size: 18px; font-weight: 600;" class="text-color">API Log</div>
    <p-toolbar styleClass="p-mb-4">
        <div class="p-toolbar-group-left">

        </div>
        <div class="p-toolbar-group-right">
            <!-- <button pButton pRipple class="p-button-warning mr-2 Newbut" (click)="openDailog()"><i
                    class="pi pi-plus"><span class="Newtxt new-font">Create new API</span></i></button> -->
            <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input pInputText type="text" (input)="dt.filterGlobal($event.target.value, 'contains')"
                    class="Searchtxt new-font" placeholder="Search..." />
            </span>
        </div>
    </p-toolbar>

    <p-table #dt [value]="tokenList" [rows]="10" [paginator]="true" [loading]="isLoadingalarmGroups"
        [globalFilterFields]="['id','tag','endpoints']" [(selection)]="alarmGroups" [rowHover]="true"
        dataKey="group_id" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
        [showCurrentPageReport]="true">

        <ng-template pTemplate="header">
            <tr>
                <!-- <th style="width: 3rem">
                      <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                  </th> -->

                <!-- <th style="text-align:center;" pSortableColumn="row_number2" class="col-1">ลำดับ <p-sortIcon field="row_number2">
                    </p-sortIcon>
                </th> -->
                <th pSortableColumn="tag" class="col-2">Tag<p-sortIcon field="tag"></p-sortIcon>
                </th>
                <th pSortableColumn="endpint" class="col-4">Endpoint<p-sortIcon field="endpint">
                    </p-sortIcon>
                </th>
                <th pSortableColumn="user_id" class="col-3">User<p-sortIcon field="user_id">
                    </p-sortIcon>
                </th>
                <th pSortableColumn="created_at" class="col-3">วันที่<p-sortIcon field="created_at">
                </p-sortIcon>
            </th>
                <!-- <th></th> -->
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-group let-rowIndex>
            <tr (click)="openDailog()">
                <!-- <td>
                      <p-tableCheckbox [value]="group"></p-tableCheckbox>
                  </td> -->
                <!-- <td style="text-align:center;">{{group.row_number2}}</td> -->
                <td>
                    <div id="myDIV1" title="{{group.tag}}">{{group.tag}}</div>
                    
                </td>
                <td>
                    <div id="myDIV3" title="{{group.endpoints}}">{{group.endpoints}}</div>
                </td>
                <td>
                    <div id="myDIV3" title="{{group.user_id}}">{{group.user_id}}</div>
                </td>
                <!--<td>{{group.symbol_name}}</td>-->
                <td style="display: flex; justify-content: space-between;">
                    <div id="myDIV3" title="{{group.created_at}}">{{group.created_at}}</div>
                </td>
                <td></td>
            </tr>
        </ng-template>
        <ng-template pTemplate="summary">
            <div class="p-d-flex p-ai-center p-jc-between">
                Total {{alarmGroups ? alarmGroups.length : 0 }} groups.
            </div>
        </ng-template>
    </p-table>
</div>
<p-dialog [(visible)]="lineDialog" [style]="{width: '650px'}" [(header)]="dialogHeader" [modal]="true"
    styleClass="p-fluid" [contentStyle]="{'overflow':'visible'}">
    <ng-template pTemplate="content">
        <div class="col-12">
            <highcharts-chart
              [Highcharts]="Highcharts5_1"
              [options]="chartOptions5_1"
              style="width: 100%; display: block;"
            ></highcharts-chart>
          </div>
    </ng-template>
</p-dialog>

<p-dialog [(visible)]="alarmGroupDialog" [style]="{width: '800px'}" styleClass="modalResponsivo" [(header)]="dialogHeader" [modal]="true"
    styleClass="p-fluid" [contentStyle]="{'overflow-y': 'auto', 'overflow-x': 'auto'}">
    <ng-template pTemplate="content">
        <div class="col-12">
            <highcharts-chart
              [Highcharts]="Highcharts5_1"
              [options]="chartOptions5_1"
              style="width: 100%; display: block;"
            ></highcharts-chart>
          </div>

    </ng-template>

    <ng-template pTemplate="footer" class="footer">

        <div style="display:flex">
            <p-checkbox name="groupname" value="recoveryNotification" label="Active"
                (onChange)="changecheck($event)" [(ngModel)]="selectedValues"></p-checkbox> &nbsp; &nbsp;
            <!-- <p-checkbox name="groupname" value="resendNotification" label="Resend Notification"
                (onChange)="changecheck($event)" [(ngModel)]="selectedValues"></p-checkbox> -->
            <!-- <p-dropdown style="width: 120px; margin-left: 16px;" [options]="minutes" [(ngModel)]="selectedValue" optionLabel="name"
                 placeholder="Resend interval"></p-dropdown> -->
        </div>

        <div style="float: right;">
            <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-danger"
                (click)="hideDialog()"></button>
            <button pButton pRipple label="Create" icon="pi pi-check" class="p-button-success" *ngIf="check1"
                (click)="createGroup()"></button>
            <button pButton pRipple label="Save" icon="pi pi-check" class="p-button-success" *ngIf="check"
                (click)="editlistGroup()"></button>
        </div>

    </ng-template>
</p-dialog>



<p-confirmDialog [style]="{width: '450px'}"></p-confirmDialog>